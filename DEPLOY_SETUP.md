# Настройка авто-деплоя через GitHub Actions

## Что уже сделано:

✅ Проект залит на GitHub: `git@github.com:irwkc/NewFormat_tour.git`
✅ Создан GitHub Actions workflow: `.github/workflows/deploy.yml`

## Что нужно настроить на GitHub:

### 1. Добавить SSH ключ в Secrets

✅ **SSH ключ уже создан и добавлен на сервер!**

1. Откройте файл `GITHUB_SSH_KEY.txt` в корне проекта - там находится приватный ключ
2. Перейдите на страницу репозитория: https://github.com/irwkc/NewFormat_tour
3. Перейдите в **Settings** → **Secrets and variables** → **Actions**
4. Нажмите **New repository secret**
5. Добавьте:
   - **Name**: `SSH_PRIVATE_KEY`
   - **Value**: скопируйте весь текст из файла `GITHUB_SSH_KEY.txt` (включая строки `-----BEGIN OPENSSH PRIVATE KEY-----` и `-----END OPENSSH PRIVATE KEY-----`)

**ВАЖНО**: После добавления ключа удалите файл `GITHUB_SSH_KEY.txt` для безопасности!

### 3. Настройка сервера для Git:

✅ **Git уже настроен на сервере!**

Сервер готов к получению обновлений из GitHub.

### 4. Автоматический деплой:

После настройки Secrets, каждый push в ветку `main` будет автоматически:
- Подключаться к серверу
- Получать последние изменения из Git
- Устанавливать зависимости
- Генерировать Prisma Client
- Применять миграции БД
- Пересобирать проект
- Перезапускать приложение через PM2

### 5. Ручной запуск деплоя:

Можно запустить деплой вручную через GitHub Actions:
1. Перейдите в **Actions** на странице репозитория
2. Выберите workflow **Deploy to Production**
3. Нажмите **Run workflow**

## Примечания:

- Убедитесь, что на сервере установлен Git
- Проверьте права доступа к файлам в `/var/www/newformat_tour`
- PM2 должен быть настроен для автоматического запуска при перезагрузке сервера
